<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html>
<head>
    <title>Demo Submission</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
	 <style>
        /* Hide the second form by default */
        #form2 {
            display: none;
        }

        /* Style for input fields on hover */
        input[type="text"]:hover,
        input[type="email"]:hover,
        input[type="tel"]:hover {
            border-color: rgb(128, 255, 255); /* Light blue border color */
        }

        /* Style for the button */
        input[type="button"], input[type="submit"] {
            background-color: rgb(128, 128, 128); /* Blue background color */
            color: white; /* White text color */
            padding: 10px 20px; /* Padding */
            border: none; /* Remove border */
            border-radius: 5px; /* Rounded corners */
            cursor: pointer; /* Cursor style */
        }

        /* Hover style for the button */
        /*  input[type="button"]:hover {
            background-color: rgb(128, 255, 255); /* Darker blue on hover */
        /* }*/
    </style>
</head>
<body>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Njumanjie - Demo Submission</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close" onclick="redirectToHome()"></button>
            </div>
            <div class="modal-body">
                <!-- Form 1 -->
                <form id="form1" class="p-4 border rounded">
                    <h1 class="mb-4"></h1>
                    <div class="mb-3">
                        <input type="text" id="name" name="name" class="form-control" placeholder="Name" required>
						<div id="nameError" class="error-message"></div>
				    </div>
                    <div class="mb-3">
                        <input type="text" id="surname" name="surname" class="form-control" placeholder="Surname">
                      
				    </div>
                    <div class="mb-3">
                        <input type="text" id="sName" name="sName" class="form-control" placeholder="Stage Name">
						<div id="idError" class="error-message"></div>
				    </div>
                    <div class="mb-3">
                        <input type="text" id="phone" name="phone" class="form-control" placeholder="Phone Number" required>
						<div id="phoneError" class="error-message"></div>
					</div>
                    <div class="mb-3">
                        <input type="email" id="email" name="email" class="form-control" placeholder="Email" required>
						<div id="emailError" class="error-message"></div>
				    </div>
                    <input type="button" value="Next" class="btn btn-primary" onclick="validateForm1()">
                </form>

                <!-- Form 2 -->
                <form id="form2" class="p-4 border rounded" onsubmit="submitData()">
                    <h1 class="mb-4"></h1>
                    <div class="mb-3">
                        <input type="tel" id="link1" name="link1" class="form-control" placeholder="Link1 To Social media">
                    </div>
                    <div class="mb-3">
                        <input type="text" id="link2" name="link2" class="form-control" placeholder="Link2 To Social media">
                    </div>
                    <div class="mb-3">
                        <input type="text" id="link3" name="link3" class="form-control" placeholder="Link for unreleased / downloadable music">
                    </div>
                    <div class="mb-3">
                        <input type="text" id="sLink" name="sLink" class="form-control" placeholder="Spotify Artist Link">
                    </div>
                    <div class="mb-3">
                        <input type="text" id="aLink" name="aLink" class="form-control" placeholder="Apple Music Link">
                    </div>
                    <div class="mb-3">
                        <input type="text" id="yLink" name="yLink" class="form-control" placeholder="YouTube Link">
                    </div>
                    <div class="mb-3">
                        <input type="text" id="auLink" name="auLink" class="form-control" placeholder="Audiomack Link">
                    </div>
                    <input type="button" value="Previous" class="btn btn-secondary" onclick="displayForm1()">
                    <input type="submit" value="Submit" class="btn btn-secondary">
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- JavaScript to show modal on page load -->
<script>
    window.onload = function () {
        var myModal = new bootstrap.Modal(document.getElementById('exampleModal'), {
            backdrop: 'static', // Prevent closing modal by clicking outside
            keyboard: false // Prevent closing modal by pressing escape key
        });
        myModal.show();
    };

    // Function to display Form 2
    function displayForm2() {
        document.getElementById("form1").style.display = "none";
        document.getElementById("form2").style.display = "block";
    }

    // Function to display Form 1
    function displayForm1() {
        document.getElementById("form2").style.display = "none";
        document.getElementById("form1").style.display = "block";
    }

    // Function to redirect to home page
    function redirectToHome() {
        window.location.href = "/";
    }

    function validateForm1() {
        // Check if name, phone, and email are filled
        var name = document.getElementById("name").value;
        var phone = document.getElementById("phone").value;
        var email = document.getElementById("email").value;
		var id = document.getElementById("sName").value;

		//Get error message divs
		var nameError = document.getElementById("nameError");
        var phoneError = document.getElementById("phoneError");
	    var emailError = document.getElementById("emailError");
		var idError = document.getElementById("idError");

		 // Clear previous error messages
		   nameError.innerText = "";
		   phoneError.innerText = "";
		   emailError.innerText = "";
		   idError.innerText = "";
		
		   if (name === "") {
		       nameError.innerText = "Name is required.";
		       nameError.style.color = "red"; // Set text color to red
		   }
		
		   if (phone === "") {
		       phoneError.innerText = "Phone Number is required.";
		       phoneError.style.color = "red"; // Set text color to red
		   }
		
		   if (email === "") {
		       emailError.innerText = "Email is required.";
		       emailError.style.color = "red"; // Set text color to red
		   }
		   
		   if (id === "") {
		   		       idError.innerText = "Stage name is required.";
		   		       idError.style.color = "red"; // Set text color to red
		   		   }

		   // If any field is empty, return without proceeding
		   if (name === "" || phone === "" || email === "" || id === "") {
		       return;
		   }

        // If all required fields are filled, proceed to Form 2
        displayForm2();
		
    }

    function submitData() {
		
		var form1Data = {
		       name: document.getElementById("name").value,
		       surname: document.getElementById("surname").value,
		       sName: document.getElementById("sName").value,
		       phone: document.getElementById("phone").value,
		       email: document.getElementById("email").value
		   };
		
		   var form2Data = {
		       link1: document.getElementById("link1").value,
		       link2: document.getElementById("link2").value,
		       link3: document.getElementById("link3").value,
		       sLink: document.getElementById("sLink").value,
		       aLink: document.getElementById("aLink").value,
		       yLink: document.getElementById("yLink").value,
		       auLink: document.getElementById("auLink").value
		   };
		
		   var combinedData = {
		       form1Data: form1Data,
		       form2Data: form2Data
		   };
		
		   // Send combinedData to Spring Boot controller using AJAX
		   var xhr = new XMLHttpRequest();
		   
		       // Configure it: POST-request for the URL with the combinedData as a JSON string
		       xhr.open("POST", "/submitFormData", true);
		       xhr.setRequestHeader("Content-Type", "application/json");
		   
		       // Send the request with the combinedData as JSON string in the body
		       xhr.send(JSON.stringify(combinedData));
		   
		       // Define what happens on successful data submission
		       xhr.onload = function () {
		           if (xhr.status === 200) {
		               console.log("Data sent successfully:", xhr.responseText);
					   window.location.href = "/";
		           } else {
		               console.error("Error sending data:", xhr.statusText);
		           }
		       };
		   
		       // Define what happens in case of error
		       xhr.onerror = function () {
		           console.error("Error sending data:", xhr.statusText);
		       };
		
		
			   alert("Demo Submission Successfully.");
			   window.location.href = "/";
               // Submit data
    }

</script>
</body>
</html>
